[TOC]

# 初识区块链

## 去中心化&比特币

* 纸币 》 记账货币 》 分布式货币
* 不能超发，避免膨胀，无中心
* 不能篡改

### BTC特性

1. 上限2100万枚

2. 挖矿：参与记账实现分配和发行

3. 分割性：1 BTC = 10^18 聪

4. 哈希：不可篡改、不可伪造

5. 不可双花

### 中心化缺点

1. 数据不保密，容易泄露
2. 中心可能篡改、丢失数据

### 去中心特性

1. 分布式
2. 可追溯
3. 不可篡改

### 区块链体系

####  区块结构

   ![image-20180807191405382](./Img/image-20180807191405382.png)

#### 哈希散列
   > 一种保证原始数据不被篡改的二进制算法

   1.1 相同数据hash相同

   1.2 hash非对称

####  区块

承载交易的数据包

#### 挖矿 

不断计算Nonce使得生成Hash值满足给定难度的过程

#### 挖矿伪代码演示

>  所谓的挖矿就是计算Nonce的过程,让Nonce匹配给定的Hash值,Hash值前面的0越 多,则说明难度越大 

* 判断生成的Hash值是否符合难度 


```python
function isValidHashDifficulty(hash, difficulty) {
  for (var i = 0, b = hash.length; i < b; i ++) {
      if (hash[i] !== '0') {
          break;
          }
  } 
  return i >= difficulty;
}
```

* 通过不断测试nonce来找到符合条件的Hash值 

```python
let nonce = 0;
let hash;
let input;
while(!isValidHashDifficulty(hash, difficulty)) {
  nonce = nonce + 1;
  input = index + previousHash + timestamp + data + nonce;
  hash = CryptoJS.SHA256(input)
}

```

} 

####  矿工/矿机/矿池

* 打包区块的人称为矿工,运算Nonce机器称为矿机 
* 单机已很难挖矿成功，加入矿池，按照比例分配成果

####  难度目标 

* 打包区块的难度,例如在比特币体系中通过调整难度目标,使得大约每10分钟左右生 成一个区块 

### 共识机制

#### 工作证明(POW Proof of work) 

   * 简单理解就是一份<u>***证明***</u>，用来确认你做过一定量的工作,例如:期末获得了优秀员工,就是你努力工作的证明. 

   * 工作证明的设计原理

     1. 取一些公开的数据(在比特币中取区块头的数据)  
     2. 给这个公开数据添加一个计数器,计数器默认从0开始(在区块链中计数器就是nonce)

     3. 将 data(数据) 和 counter(计数器) 组合到一起,获得一个哈希检查哈希是否符合一定的条件

     4. 如果符合条件，结束如果不符合,增加计数器,重复步骤:3­-4. 
* 浪费：因为只有算出符合条件的hash者有奖励，而其他人没有，却耗费了庞大算力。


#### 股权证明 (POS Proof of stake) 

1. 在POS模式下,有一个名词叫币龄,每个币每天会产生1币龄.(100个币,共持了30天, 那么币龄就是3000) 
2. POS也需要挖矿,但是币龄越多的人挖矿越容易,如果发现了一个区块,则获得奖励, 但之前的币龄就会被清空 
3. POW中决定谁更能挖到矿的是算力.而POS不同.决定谁更可能挖到币的是"币数 量" + "币龄" 
4. POW导致了算力的浪费,而POS则慢慢会导致贫富差距扩大 

#### 委托权益证明 (DPOS : Delegated Proof of Stake) 

1. 类似人大代表制度,理解为N个节点,N个超级节点彼此的权利是完全等同的. 
2. 不挖矿,采用超级节点方式来记账,靠数字货币增发来奖励超级节点
3. 当前EOS采用此模式,此方式也称为半去中心化. 










# 比特币

# 落地应用 